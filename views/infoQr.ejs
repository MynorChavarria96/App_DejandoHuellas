<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Información de la Mascota</title>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <style>
        .mascota-info {
            padding: 20px;
        }
        .mascota-info img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Información de la Mascota</h1>
        <div class="mascota-info">
            <p><strong>Nombre:</strong> <span id="nombre"></span></p>
            <p><strong>Especie:</strong> <span id="especie"></span></p>
            <p><strong>Raza:</strong> <span id="raza"></span></p>
            <p><strong>Género:</strong> <span id="genero"></span></p>
            <p><strong>Fecha de Nacimiento:</strong> <span id="fecha_nacimiento"></span></p>
            <p><strong>Color:</strong> <span id="color"></span></p>
            <p><strong>Peso:</strong> <span id="peso"></span> kg</p>
            <p><strong>Enfermedad Crónica:</strong> <span id="enfermedad_cronica"></span></p>
            <p><strong>Propietario:</strong> <span id="propietario"></span></p>
            <p><strong>Residencia:</strong> <span id="residencia"></span></p>
            <p><strong>Teléfono:</strong> <span id="telefono"></span></p>
            <p><strong>Correo:</strong> <span id="correo"></span></p>
            <img id="foto" alt="Foto de la mascota">
        </div>
    </div>

    <script>
  document.addEventListener('DOMContentLoaded', function() {
    const identificador_qr = window.location.pathname.split('/').pop();

    fetch(`/info/qr/${identificador_qr}`)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            const mascota = data[0]; // Acceder a la primera posición del arreglo
            if (mascota) {
                document.getElementById('nombre').textContent = mascota.nombre;
                document.getElementById('especie').textContent = mascota.nombre_especie;
                document.getElementById('raza').textContent = mascota.raza;
                document.getElementById('genero').textContent = mascota.nombre_genero;
                document.getElementById('fecha_nacimiento').textContent = new Date(mascota.fecha_nacimiento).toLocaleDateString();
                document.getElementById('color').textContent = mascota.color;
                document.getElementById('peso').textContent = mascota.peso;
                document.getElementById('enfermedad_cronica').textContent = mascota.enfermedad_cronica || 'N/A';
                document.getElementById('propietario').textContent = mascota.propietario;
                document.getElementById('residencia').textContent = mascota.residencia;
                document.getElementById('telefono').textContent = mascota.telefono;
                document.getElementById('correo').textContent = mascota.correo;
                document.getElementById('foto').src = mascota.foto;
            } else {
                document.body.innerHTML = '<p>Mascota no encontrada.</p>';
            }
        })
        .catch(error => {
            console.error('Error al obtener la mascota:', error);
            document.body.innerHTML = '<p>Error al cargar la información de la mascota.</p>';
        });
});

    </script>
</body>
</html>
